{% extends "base.html" %}

{% block content %}

<!-- FLIGHT TEMPLATE WITH DATE SANITY & CONFIDENCE -->

<h2>Flight Price Intelligence</h2>

<div class="card">
    <form method="GET">
        <label>Origin</label><br>
        <input
            type="text"
            name="origin"
            placeholder="New York or NYC"
            value="{{ request.args.get('origin','') }}"
            required
        >
        <br><br>

        <label>Destination</label><br>
        <input
            type="text"
            name="destination"
            placeholder="London or LON"
            value="{{ request.args.get('destination','') }}"
            required
        >
        <br><br>

        <label>Departure Date</label><br>
        <input
            type="date"
            name="departure_date"
            value="{{ request.args.get('departure_date','') }}"
            required
        >
        <br><br>

        <button type="submit">Analyze</button>
    </form>

    <p><em>
        Tip: Enter a city name (e.g. New York) or airport code (e.g. NYC).
    </em></p>
</div>

{% if info %}

    {% if info.error %}
        <div class="card">
            <p><strong>Error:</strong> {{ info.error }}</p>
        </div>
    {% else %}
        <div class="card">

            <h3>{{ info.origin }} â†’ {{ info.destination }}</h3>
            <p><strong>Departure Date:</strong> {{ info.departure_date }}</p>

            <!-- ðŸ”µ DATE SANITY INTELLIGENCE -->
            <p><strong>Booking Window:</strong> {{ info.window }}</p>
            <p><em>{{ info.note }}</em></p>

            <hr>

            <p><strong>Current Price:</strong> ${{ info.current_price }}</p>
            <p><strong>Average Price:</strong> ${{ info.avg_price }}</p>
            <p><strong>Highest Observed:</strong> ${{ info.highest_price }}</p>

            <p><strong>Trend:</strong> {{ info.trend }}</p>

            <h3>
                Recommendation:
                {% if info.recommendation == "BUY" %}
                    ðŸŸ¢ BUY
                {% else %}
                    ðŸŸ¡ WAIT
                {% endif %}
            </h3>

            <p><strong>Confidence:</strong> {{ info.confidence }}%</p>
            <p><em>Source: {{ info.source }}</em></p>

        </div>
    {% endif %}

{% endif %}

{% endblock %}
